\documentclass[11pt,a4paper]{book}
\usepackage{fontspec}
\usepackage{amsthm, listings, color}
\setmainfont{.PingFang SC}

\theoremstyle{break}
\newtheorem*{theorem}{定理}
\newtheorem*{lemma}{引理}
\newtheorem*{myproof}{证明}

% 设置代码样式
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=4
}


\begin{document}

	\begin{theorem}[均值不等式]
		设 $A,B$是两个实数,则 $2AB\leq 2 A^2+B^2$.
	\end{theorem}
	
	\begin{lemma}
		This is a lemma.
	\end{lemma}
	
	\begin{myproof}
		This is proof.
	\end{myproof}
	
	\setlength{\parindent}{2em}
	\begin{theorem}
	  设$a,b$是两个实数，则$2ab\leq a^2+b^2$.
	\end{theorem}
	\begin{myproof}
	  因为$(a-b)^{2}\geq 0$\\
	  所以可得到$a^{2}+b^{2}-2ab\geq 0$,从而得到$2ab\leq a^2+b^2$。
	\end{myproof}
	
	\lstset{style=mystyle}
	\begin{lstlisting}[language=java]
		public class Main {
		    public static void main(String[] args) {
		        char a = 'A'; //英文
		        char zh = '中'; //中文
		        System.out.println(a);
		        System.out.println(zh);
		    }
		}
	\end{lstlisting}

\end{document}